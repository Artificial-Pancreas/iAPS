var freeaps_determineBasal;(()=>{var e={760:(e,r)=>{e.exports=function(e,r){var a=20;void 0!==r&&"string"==typeof r.model&&(r.model?.endsWith("54")||r.model?.endsWith("23"))&&(a=40);return e<1?Math.round(e*a)/a:e<10?Math.round(20*e)/20:Math.round(10*e)/10}},761:(e,r,a)=>{var t=a(760);function n(e,r){r||(r=0);var a=Math.pow(10,r);return Math.round(e*a)/a}function o(e,r){return"mmol/L"===r.out_units?n(e/18,1):Math.round(e)}e.exports=function(e,r,a,s,i,l,m,d,u,h){var B={},b=new Date;if(h&&(b=h),void 0===s||void 0===s.current_basal)return B.error="Error: could not get current basal rate",B;var p=t(s.current_basal,s),c=p,g=new Date;h&&(g=h);var M,f=n((g-new Date(e.date))/60/1e3,1),v=e.glucose,_=e.noise;M=e.delta>-.5?"+"+n(e.delta,0):n(e.delta,0);var x=Math.min(e.delta,e.short_avgdelta),G=Math.min(e.short_avgdelta,e.long_avgdelta),C=Math.max(e.delta,e.short_avgdelta,e.long_avgdelta);if(v<=10||38===v||_>=3||f>12)return r.rate>c?(B.reason+=". Replacing high temp basal of "+r.rate+" with neutral temp of "+c,B.deliverAt=b,B.temp="absolute",B.duration=30,B.rate=c,B):0===r.rate&&r.duration>30?(B.reason+=". Shortening "+r.duration+"m long zero temp to 30m. ",B.deliverAt=b,B.temp="absolute",B.duration=30,B.rate=0,B):(B.reason+=". Temp "+r.rate+" <= current basal "+c+"U/hr; doing nothing. ",B);var S,w,O,T,A,U=s.max_iob;if(void 0!==s.min_bg&&(w=s.min_bg),void 0!==s.max_bg&&(O=s.max_bg),void 0!==s.enableSMB_high_bg_target&&(T=s.enableSMB_high_bg_target),void 0===s.min_bg||void 0===s.max_bg)return B.error="Error: could not determine target_bg. ",B;S=(s.min_bg+s.max_bg)/2;var y=s.exercise_mode||s.high_temptarget_raises_sensitivity,I=100;if(s.half_basal_exercise_target)var D=s.half_basal_exercise_target;else D=160;if(y&&s.temptargetSet&&S>I||s.low_temptarget_lowers_sensitivity&&s.temptargetSet&&S<I){var W=D-I;A=W*(W+S-I)<=0?s.autosens_max:W/(W+S-I),A=n(A=Math.min(A,s.autosens_max),2),process.stderr.write("Sensitivity ratio set to "+A+" based on temp target of "+S+"; ")}else void 0!==i&&i&&(A=i.ratio,process.stderr.write("Autosens ratio: "+A+"; "));if(A&&(c=s.current_basal*A,(c=t(c,s))!==p?process.stderr.write("Adjusting basal from "+p+" to "+c+"; "):process.stderr.write("Basal unchanged: "+c+"; ")),s.temptargetSet);else if(void 0!==i&&i&&(s.sensitivity_raises_target&&i.ratio<1||s.resistance_lowers_target&&i.ratio>1)){w=n((w-60)/i.ratio)+60,O=n((O-60)/i.ratio)+60;var E=n((S-60)/i.ratio)+60;S===(E=Math.max(80,E))?process.stderr.write("target_bg unchanged: "+E+"; "):process.stderr.write("target_bg from "+S+" to "+E+"; "),S=E}if(e.noise>=2){var q=Math.max(1.1,s.noisyCGMTargetMultiplier),F=(Math.min(250,s.maxRaw),n(Math.min(200,w*q))),R=n(Math.min(200,S*q)),z=n(Math.min(200,O*q));process.stderr.write("Raising target_bg for noisy / raw CGM data, from "+S+" to "+R+"; "),w=F,S=R,O=z}var k=65;s.threshold_setting&&(k=s.threshold_setting);var L=Math.max(w-.5*(w-40),k);process.stderr.write("Glucose threshold: "+o(L,s));var j=n(s.sens,1),P=s.sens;if(void 0!==i&&i&&((P=n(P=s.sens/A,1))!==j?process.stderr.write("ISF from "+j+" to "+P):process.stderr.write("ISF unchanged: "+P)),console.error("; CR:",s.carb_ratio),void 0===a)return B.error="Error: iob_data undefined. ",B;var H,Z=a;if(a.length,a.length>1&&(a=Z[0]),void 0===a.activity||void 0===a.iob)return B.error="Error: iob_data missing some property. ",B;var N=((H=void 0!==a.lastTemp?n((new Date(g).getTime()-a.lastTemp.date)/6e4):0)+r.duration)%30;if(console.error("currenttemp:",r,"lastTempAge:",H,"m","tempModulus:",N,"m"),B.temp="absolute",B.deliverAt=b,d&&r&&r.rate&&a.lastTemp&&a.lastTemp.rate&&Math.abs(r.rate-a.lastTemp.rate)>.001&&H>10&&r.duration)return B.reason="Warning: currenttemp rate "+r.rate+" != lastTemp rate "+a.lastTemp.rate+" from pumphistory; canceling temp",m.setTempBasal(0,0,s,B,r);if(r&&a.lastTemp&&r.duration>0){var J=H-a.lastTemp.duration;if(J>5&&H>10)return B.reason="Warning: currenttemp running but lastTemp from pumphistory ended "+J+"m ago; canceling temp",m.setTempBasal(0,0,s,B,r)}var K=n(-a.activity*P*5,2),Q=n(6*(x-K));if(Q<0&&(Q=n(6*(G-K)))<0&&(Q=n(6*(e.long_avgdelta-K))),a.iob>0)var V=n(v-a.iob*P);else V=n(v-a.iob*Math.min(P,s.sens));var X=V+Q;if(void 0===X||isNaN(X))return B.error="Error: could not calculate eventualBG. ",B;var Y=function(e,r,a){return n(a+(e-r)/24,1)}(S,X,K);B={temp:"absolute",bg:v,tick:M,eventualBG:X,insulinReq:0,reservoir:u,deliverAt:b,sensitivityRatio:A};var $=[],ee=[],re=[],ae=[];$.push(v),ee.push(v),ae.push(v),re.push(v);var te=function(e,r,a,t,n,s){return r?!e.allowSMB_with_high_temptarget&&e.temptargetSet&&n>100?(console.error("SMB disabled due to high temptarget of",n),!1):!0===a.bwFound&&!1===e.A52_risk_enable?(console.error("SMB disabled due to Bolus Wizard activity in the last 6 hours."),!1):!0===e.enableSMB_always?(a.bwFound?console.error("Warning: SMB enabled within 6h of using Bolus Wizard: be sure to easy bolus 30s before using Bolus Wizard"):console.error("SMB enabled due to enableSMB_always"),!0):!0===e.enableSMB_with_COB&&a.mealCOB?(a.bwCarbs?console.error("Warning: SMB enabled with Bolus Wizard carbs: be sure to easy bolus 30s before using Bolus Wizard"):console.error("SMB enabled for COB of",a.mealCOB),!0):!0===e.enableSMB_after_carbs&&a.carbs?(a.bwCarbs?console.error("Warning: SMB enabled with Bolus Wizard carbs: be sure to easy bolus 30s before using Bolus Wizard"):console.error("SMB enabled for 6h after carb entry"),!0):!0===e.enableSMB_with_temptarget&&e.temptargetSet&&n<100?(a.bwFound?console.error("Warning: SMB enabled within 6h of using Bolus Wizard: be sure to easy bolus 30s before using Bolus Wizard"):console.error("SMB enabled for temptarget of",o(n,e)),!0):!0===e.enableSMB_high_bg&&null!==s&&t>=s?(console.error("Checking BG to see if High for SMB enablement."),console.error("Current BG",t," | High BG ",s),a.bwFound?console.error("Warning: High BG SMB enabled within 6h of using Bolus Wizard: be sure to easy bolus 30s before using Bolus Wizard"):console.error("High BG detected. Enabling SMB."),!0):(console.error("SMB disabled (no enableSMB preferences active or no condition satisfied)"),!1):(console.error("SMB disabled (!microBolusAllowed)"),!1)}(s,d,l,v,S,T),ne=s.enableUAM,oe=0,se=0;oe=n(x-K,1);var ie=n(x-K,1),le=P/s.carb_ratio;console.error("profile.sens:",s.sens,"sens:",P,"CSF:",le);var me=n(30*le*5/60,1);oe>me&&(console.error("Limiting carb impact from",oe,"to",me,"mg/dL/5m (",30,"g/h )"),oe=me);var de=3;A&&(de/=A);var ue=de;if(l.carbs){de=Math.max(de,l.mealCOB/20);var he=n((new Date(g).getTime()-l.lastCarbTime)/6e4),Be=(l.carbs-l.mealCOB)/l.carbs;ue=n(ue=de+1.5*he/60,1),console.error("Last carbs",he,"minutes ago; remainingCATime:",ue,"hours;",n(100*Be)+"% carbs absorbed")}var be=Math.max(0,oe/5*60*ue/2)/le,pe=90,ce=1;s.remainingCarbsCap&&(pe=Math.min(90,s.remainingCarbsCap)),s.remainingCarbsFraction&&(ce=Math.min(1,s.remainingCarbsFraction));var ge=1-ce,Me=Math.max(0,l.mealCOB-be-l.carbs*ge),fe=(Me=Math.min(pe,Me))*le*5/60/(ue/2),ve=n(l.slopeFromMaxDeviation,2),_e=n(l.slopeFromMinDeviation,2),xe=Math.min(ve,-_e/3);se=0===oe?0:Math.min(60*ue/5/2,Math.max(0,l.mealCOB*le/oe)),console.error("Carb Impact:",oe,"mg/dL per 5m; CI Duration:",n(5*se/60*2,1),"hours; remaining CI (",ue," peak):",n(fe,1),"mg/dL per 5m");var Ge,Ce,Se,we,Oe,Te=999,Ae=999,Ue=999,ye=v,Ie=999,De=999,We=999,Ee=999,qe=X,Fe=v,Re=v,ze=0,ke=[],Le=[];try{Z.forEach((function(e){var r=n(-e.activity*P*5,2),a=n(-e.iobWithZeroTemp.activity*P*5,2),t=oe*(1-Math.min(1,ee.length/12));qe=ee[ee.length-1]+r+t;var o=ae[ae.length-1]+a,s=Math.max(0,Math.max(0,oe)*(1-$.length/Math.max(2*se,1))),i=Math.min($.length,12*ue-$.length),l=Math.max(0,i/(ue/2*12)*fe);ke.push(n(l,0)),Le.push(n(s,0)),COBpredBG=$[$.length-1]+r+Math.min(0,t)+s+l;var m=Math.max(0,ie+re.length*xe),d=Math.max(0,ie*(1-re.length/Math.max(36,1))),u=Math.min(m,d);u>0&&(ze=n(5*(re.length+1)/60,1)),UAMpredBG=re[re.length-1]+r+Math.min(0,t)+u,ee.length<48&&ee.push(qe),$.length<48&&$.push(COBpredBG),re.length<48&&re.push(UAMpredBG),ae.length<48&&ae.push(o),COBpredBG<Ie&&(Ie=n(COBpredBG)),UAMpredBG<De&&(De=n(UAMpredBG)),qe<We&&(We=n(qe)),o<Ee&&(Ee=n(o));ee.length>18&&qe<Te&&(Te=n(qe)),qe>Fe&&(Fe=qe),(se||fe>0)&&$.length>18&&COBpredBG<Ae&&(Ae=n(COBpredBG)),(se||fe>0)&&COBpredBG>Fe&&(Re=COBpredBG),ne&&re.length>12&&UAMpredBG<Ue&&(Ue=n(UAMpredBG)),ne&&UAMpredBG>Fe&&UAMpredBG}))}catch(e){console.error("Problem with iobArray.  Optional feature Advanced Meal Assist disabled")}l.mealCOB&&(console.error("predCIs (mg/dL/5m):",Le.join(" ")),console.error("remainingCIs:      ",ke.join(" "))),B.predBGs={},ee.forEach((function(e,r,a){a[r]=n(Math.min(401,Math.max(39,e)))}));for(var je=ee.length-1;je>12&&ee[je-1]===ee[je];je--)ee.pop();for(B.predBGs.IOB=ee,Se=n(ee[ee.length-1]),ae.forEach((function(e,r,a){a[r]=n(Math.min(401,Math.max(39,e)))})),je=ae.length-1;je>6&&!(ae[je-1]>=ae[je]||ae[je]<=S);je--)ae.pop();if(B.predBGs.ZT=ae,n(ae[ae.length-1]),l.mealCOB>0&&(oe>0||fe>0)){for($.forEach((function(e,r,a){a[r]=n(Math.min(401,Math.max(39,e)))})),je=$.length-1;je>12&&$[je-1]===$[je];je--)$.pop();B.predBGs.COB=$,we=n($[$.length-1]),X=Math.max(X,n($[$.length-1]))}if(oe>0||fe>0){if(ne){for(re.forEach((function(e,r,a){a[r]=n(Math.min(401,Math.max(39,e)))})),je=re.length-1;je>12&&re[je-1]===re[je];je--)re.pop();B.predBGs.UAM=re,Oe=n(re[re.length-1]),re[re.length-1]&&(X=Math.max(X,n(re[re.length-1])))}B.eventualBG=X}console.error("UAM Impact:",ie,"mg/dL per 5m; UAM Duration:",ze,"hours"),Te=Math.max(39,Te),Ae=Math.max(39,Ae),Ue=Math.max(39,Ue),Ge=n(Te);var Pe=l.mealCOB/l.carbs;Ce=n(Ue<999&&Ae<999?(1-Pe)*UAMpredBG+Pe*COBpredBG:Ae<999?(qe+COBpredBG)/2:Ue<999?(qe+UAMpredBG)/2:qe),Ee>Ce&&(Ce=Ee),ye=n(ye=se||fe>0?ne?Pe*Ie+(1-Pe)*De:Ie:ne?De:We);var He=Ue;if(Ee<L)He=(Ue+Ee)/2;else if(Ee<S){var Ze=(Ee-L)/(S-L);He=(Ue+(Ue*Ze+Ee*(1-Ze)))/2}else Ee>Ue&&(He=(Ue+Ee)/2);if(He=n(He),l.carbs)if(!ne&&Ae<999)Ge=n(Math.max(Te,Ae));else if(Ae<999){var Ne=Pe*Ae+(1-Pe)*He;Ge=n(Math.max(Te,Ae,Ne))}else Ge=ne?He:ye;else ne&&(Ge=n(Math.max(Te,He)));Ge=Math.min(Ge,Ce),process.stderr.write("minPredBG: "+Ge+" minIOBPredBG: "+Te+" minZTGuardBG: "+Ee),Ae<999&&process.stderr.write(" minCOBPredBG: "+Ae),Ue<999&&process.stderr.write(" minUAMPredBG: "+Ue),console.error(" avgPredBG:",Ce,"COB:",l.mealCOB,"/",l.carbs),Re>v&&(Ge=Math.min(Ge,Re)),B.COB=l.mealCOB,B.IOB=a.iob,B.BGI=o(K,s),B.deviation=o(Q,s),B.ISF=o(P,s),B.CR=n(s.carb_ratio,2),B.target_bg=o(S,s),B.reason="COB: "+B.COB+", Dev: "+B.deviation+", BGI: "+B.BGI+", ISF: "+B.ISF+", CR: "+B.CR+", minPredBG: "+o(Ge,s)+", minGuardBG: "+o(ye,s)+", IOBpredBG: "+o(Se,s),we>0&&(B.reason+=", COBpredBG: "+o(we,s)),Oe>0&&(B.reason+=", UAMpredBG: "+o(Oe,s)),B.reason+="; ";var Je=V;Je<40&&(Je=Math.min(ye,Je));var Ke,Qe=L-Je,Ve=240,Xe=240;if(l.mealCOB>0&&(oe>0||fe>0)){for(je=0;je<$.length;je++)if($[je]<w){Ve=5*je;break}for(je=0;je<$.length;je++)if($[je]<L){Xe=5*je;break}}else{for(je=0;je<ee.length;je++)if(ee[je]<w){Ve=5*je;break}for(je=0;je<ee.length;je++)if(ee[je]<L){Xe=5*je;break}}te&&ye<L&&(console.error("minGuardBG",o(ye,s),"projected below",o(L,s),"- disabling SMB"),te=!1),void 0===s.maxDelta_bg_threshold&&(Ke=.2),void 0!==s.maxDelta_bg_threshold&&(Ke=Math.min(s.maxDelta_bg_threshold,.3)),C>Ke*v&&(console.error("maxDelta "+o(C,s)+" > "+100*Ke+"% of BG "+o(v,s)+" - disabling SMB"),B.reason+="maxDelta "+o(C,s)+" > "+100*Ke+"% of BG "+o(v,s)+": SMB disabled; ",te=!1),console.error("BG projected to remain above",o(w,s),"for",Ve,"minutes"),(Xe<240||Ve<60)&&console.error("BG projected to remain above",o(L,s),"for",Xe,"minutes");var Ye=Xe,$e=s.current_basal*P*Ye/60,er=(Qe-$e)/le-Math.max(0,l.mealCOB-.25*l.carbs);if($e=n($e),er=n(er),console.error("naive_eventualBG: "+o(V,s)+", bgUndershoot: "+o(Qe,s)+", zeroTempDuration: "+Ye+", zeroTempEffect: "+$e+", carbsReq: "+er),"Could not parse clock data"==l.reason?console.error("carbsReq unknown: Could not parse clock data"):er>=s.carbsReqThreshold&&Xe<=45&&(B.carbsReq=er,B.reason+=er+" add'l carbs req w/in "+Xe+"m; "),v<L&&a.iob<20*-s.current_basal/60&&x>0&&x>Y)B.reason+="IOB "+a.iob+" < "+n(20*-s.current_basal/60,2),B.reason+=" and minDelta "+o(x,s)+" > expectedDelta "+o(Y,s)+"; ";else if(v<L||ye<L){B.reason+="minGuardBG: "+o(ye,s)+"<"+o(L,s);var rr=(Qe=S-ye)/P,ar=n(60*rr/s.current_basal);return ar=30*n(ar/30),ar=Math.min(120,Math.max(30,ar)),m.setTempBasal(0,ar,s,B,r)}if(s.skip_neutral_temps&&B.deliverAt.getMinutes()>=55)return B.reason+="; Canceling temp at "+B.deliverAt.getMinutes()+"m past the hour. ",m.setTempBasal(0,0,s,B,r);if(X<w){if(B.reason+="Eventual BG "+o(X,s)+" < "+o(w,s),x>Y&&x>0&&!er)return V<40?(B.reason+=", naive_eventualBG < 40. ",m.setTempBasal(0,30,s,B,r)):(e.delta>x?B.reason+=", but Delta "+o(M,s)+" > expectedDelta "+o(Y,s):B.reason+=", but Min. Delta "+x.toFixed(2)+" > Exp. Delta "+o(Y,s),r.duration>15&&t(c,s)===t(r.rate,s)?(B.reason+=", temp "+r.rate+" ~ req "+c+"U/hr. ",B):(B.reason+="; setting current basal of "+c+" as temp. ",m.setTempBasal(c,30,s,B,r)));var tr=2*Math.min(0,(X-S)/P);tr=n(tr,2);var nr=Math.min(0,(V-S)/P);if(nr=n(nr,2),x<0&&x>Y)tr=n(tr*(x/Y),2);var or=c+2*tr;or=t(or,s);var sr=r.duration*(r.rate-c)/60;if(sr<Math.min(tr,nr)-.3*c)return B.reason+=", "+r.duration+"m@"+r.rate.toFixed(2)+" is a lot less than needed. ",m.setTempBasal(or,30,s,B,r);if(void 0!==r.rate&&r.duration>5&&or>=.8*r.rate)return B.reason+=", temp "+r.rate+" ~< req "+or+"U/hr. ",B;if(or<=0){if((ar=n(60*(rr=(Qe=S-V)/P)/s.current_basal))<0?ar=0:(ar=30*n(ar/30),ar=Math.min(120,Math.max(0,ar))),ar>0)return B.reason+=", setting "+ar+"m zero temp. ",m.setTempBasal(or,ar,s,B,r)}else B.reason+=", setting "+or+"U/hr. ";return m.setTempBasal(or,30,s,B,r)}if(x<Y&&(!d||!te))return e.delta<x?B.reason+="Eventual BG "+o(X,s)+" > "+o(w,s)+" but Delta "+o(M,s)+" < Exp. Delta "+o(Y,s):B.reason+="Eventual BG "+o(X,s)+" > "+o(w,s)+" but Min. Delta "+x.toFixed(2)+" < Exp. Delta "+o(Y,s),r.duration>15&&t(c,s)===t(r.rate,s)?(B.reason+=", temp "+r.rate+" ~ req "+c+"U/hr. ",B):(B.reason+="; setting current basal of "+c+" as temp. ",m.setTempBasal(c,30,s,B,r));if(Math.min(X,Ge)<O&&(!d||!te))return B.reason+=o(X,s)+"-"+o(Ge,s)+" in range: no temp required",r.duration>15&&t(c,s)===t(r.rate,s)?(B.reason+=", temp "+r.rate+" ~ req "+c+"U/hr. ",B):(B.reason+="; setting current basal of "+c+" as temp. ",m.setTempBasal(c,30,s,B,r));if(X>=O&&(B.reason+="Eventual BG "+o(X,s)+" >= "+o(O,s)+", "),a.iob>U)return B.reason+="IOB "+n(a.iob,2)+" > max_iob "+U,r.duration>15&&t(c,s)===t(r.rate,s)?(B.reason+=", temp "+r.rate+" ~ req "+c+"U/hr. ",B):(B.reason+="; setting current basal of "+c+" as temp. ",m.setTempBasal(c,30,s,B,r));(tr=n((Math.min(Ge,X)-S)/P,2))>U-a.iob&&(B.reason+="max_iob "+U+", ",tr=U-a.iob),or=t(or=c+2*tr,s),tr=n(tr,3),B.insulinReq=tr;var ir=n((new Date(g).getTime()-a.lastBolusTime)/6e4,1);if(d&&te&&v>L){var lr=n(l.mealCOB/s.carb_ratio,3);if(void 0===s.maxSMBBasalMinutes){var mr=n(30*s.current_basal/60,1);console.error("profile.maxSMBBasalMinutes undefined: defaulting to 30m")}else a.iob>lr&&a.iob>0?(console.error("IOB",a.iob,"> COB",l.mealCOB+"; mealInsulinReq =",lr),s.maxUAMSMBBasalMinutes?(console.error("profile.maxUAMSMBBasalMinutes:",s.maxUAMSMBBasalMinutes,"profile.current_basal:",s.current_basal),mr=n(s.current_basal*s.maxUAMSMBBasalMinutes/60,1)):(console.error("profile.maxUAMSMBBasalMinutes undefined: defaulting to 30m"),mr=n(30*s.current_basal/60,1))):(console.error("profile.maxSMBBasalMinutes:",s.maxSMBBasalMinutes,"profile.current_basal:",s.current_basal),mr=n(s.current_basal*s.maxSMBBasalMinutes/60,1));var dr=.5;s.smb_delivery_ratio&&(dr=Math.min(Math.max(s.smb_delivery_ratio,.1),1),process.stderr.write("SMB Ratio: "+dr)),bolusIncrement=.1,s.bolus_increment&&(bolusIncrement=s.bolus_increment);var ur=1/bolusIncrement,hr=Math.floor(Math.min(tr*dr,mr)*ur)/ur;ar=n(60*(rr=(S-(V+Te)/2)/P)/s.current_basal),tr>0&&hr<bolusIncrement&&(ar=0);var Br=0;ar<=0?ar=0:ar>=30?(ar=30*n(ar/30),ar=Math.min(60,Math.max(0,ar))):(Br=t(c*(30-ar)/30,s),ar=30),B.reason+=" insulinReq "+tr,hr>=mr&&(B.reason+="; maxBolus "+mr),ar>0&&(B.reason+="; setting "+ar+"m low temp of "+Br+"U/h"),B.reason+=". ";var br=3;s.SMBInterval&&(br=Math.min(10,Math.max(1,s.SMBInterval)));var pr=n(br-ir,0),cr=n(60*(br-ir),0)%60;if(console.error("naive_eventualBG "+o(V,s)+", "+ar+"m "+Br+"U/h temp needed; last bolus "+ir+"m ago; maxBolus: "+mr),ir>br?hr>0&&(B.units=hr,B.reason+="Microbolusing "+hr+"U. "):B.reason+="Waiting "+pr+"m "+cr+"s to microbolus again. ",ar>0)return B.rate=Br,B.duration=ar,B}var gr=m.getMaxSafeBasal(s);return or>gr&&(B.reason+="adj. req. rate: "+or+" to maxSafeBasal: "+gr+", ",or=t(gr,s)),(sr=r.duration*(r.rate-c)/60)>=2*tr?(B.reason+=r.duration+"m@"+r.rate.toFixed(2)+" > 2 * insulinReq. Setting temp basal of "+or+"U/hr. ",m.setTempBasal(or,30,s,B,r)):void 0===r.duration||0===r.duration?(B.reason+="no temp, setting "+or+"U/hr. ",m.setTempBasal(or,30,s,B,r)):r.duration>5&&t(or,s)<=t(r.rate,s)?(B.reason+="temp "+r.rate+" >~ req "+or+"U/hr. ",B):(B.reason+="temp "+r.rate+"<"+or+"U/hr. ",m.setTempBasal(or,30,s,B,r))}}},r={};var a=function a(t){var n=r[t];if(void 0!==n)return n.exports;var o=r[t]={exports:{}};return e[t](o,o.exports,a),o.exports}(761);freeaps_determineBasal=a})();