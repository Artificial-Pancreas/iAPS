var freeaps_glucoseGetLast;(()=>{var e={6237:e=>{function t(e){return e.date||Date.parse(e.display_time)||Date.parse(e.dateString)}e.exports=function(e){for(var r=void 0,o=void 0,a=[],n=[],u=[],s=0,l=0;l<e.length;l++){var i=e[l];if(i.glucose=i.glucose||i.sgv,i.glucose)if(void 0!==r){if(void 0!==r){if("cal"===i.type){s=l;break}if(i.glucose>38&&i.device===r.device){var c,d=i,g=t(d),v=0;if(void 0===g||void 0===o){console.error("Error: date field not found: cannot calculate avgdelta");continue}if(c=Math.round((o-g)/6e4),v=(r.glucose-d.glucose)/c*5,-2<c&&c<2.5)r.glucose=(r.glucose+d.glucose)/2,o=(o+g)/2;else if(2.5<c&&c<17.5)n.push(v),2.5<c&&c<7.5&&a.push(v);else if(17.5<c&&c<42.5)u.push(v);else if(c>42.5)break}}}else r=i,o=t(i)}var f=0,h=0,p=0;return a.length>0&&(f=a.reduce((function(e,t){return e+t}))/a.length),n.length>0&&(h=n.reduce((function(e,t){return e+t}))/n.length),u.length>0&&(p=u.reduce((function(e,t){return e+t}))/u.length),{delta:Math.round(100*f)/100,glucose:Math.round(100*r.glucose)/100,noise:Math.round(r.noise),short_avgdelta:Math.round(100*h)/100,long_avgdelta:Math.round(100*p)/100,date:o,last_cal:s,device:r.device}}}},t={};var r=function r(o){var a=t[o];if(void 0!==a)return a.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}(6237);freeaps_glucoseGetLast=r})();