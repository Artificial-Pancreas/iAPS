var freeaps_meal;(()=>{var e={83:(e,t)=>{"use strict";t.maxDailyBasal=function(e){var t=e.basals.length?e.basals.reduce(((e,t)=>Number(t.rate)>Number(e.rate)?t:e)):null;return 1e3*Number(t.rate)/1e3},t.maxBasalLookup=function(e){return e.settings.maxBasal},t.basalLookup=function(e,t){var a=t;void 0===t&&(a=new Date);var r=e.slice().sort(((e,t)=>e.i-t.i)),i=r[r.length-1].rate;if(0!==i){for(var n=60*a.getHours()+a.getMinutes(),s=0;s<r.length-1;s++)if(n>=r[s].minutes&&n<r[s+1].minutes){i=r[s].rate;break}return Math.round(1e3*i)/1e3}console.error("ERROR: bad basal schedule",e)}},191:(e,t,a)=>{"use strict";var r=a(466),i=a(635),n=a(663),s=a(249);e.exports=function(e,t,a){if(a)o=[];else{a=i(e);var o=i(e,240)}var u={treatments:a,profile:e.profile,calculate:n};e.autosens&&(u.autosens=e.autosens);var l={treatments:o,profile:e.profile,calculate:n},d=[];/(Z|[+-][0-2][0-9]:?[034][05])+/.test(e.clock)||console.error("Warning: clock input "+e.clock+" is unzoned; please pass clock-zoned.json instead");var m,p=r(e.clock),c=new Date(0).getTime(),f={};f.date=new Date(0).getTime(),a.forEach((function(e){e.insulin&&e.started_at?c=Math.max(c,e.started_at):"number"==typeof e.rate&&e.duration&&e.date>f.date&&((f=e).duration=Math.round(100*f.duration)/100)})),m=t?1:240;for(var v=0;v<m;v+=5){var b=new Date(p.getTime()+6e4*v),g=s(u,b),h=s(l,b);d.push(g),d[d.length-1].iobWithZeroTemp=h}return d[0].lastBolusTime=c,d[0].lastTemp=f,d}},249:(e,t)=>{"use strict";e.exports=function(e,t){var a,r=t.getTime(),i=e.calculate,n=e.treatments,s=e.profile,o=s.dia,u=0,l=0,d=0,m=0,p=0,c=0;if(!n)return{};o<3&&(o=3);var f={bilinear:{requireLongDia:!1,peak:75},"rapid-acting":{requireLongDia:!0,peak:75,tdMin:300},"ultra-rapid":{requireLongDia:!0,peak:55,tdMin:300}},v="bilinear";void 0!==s.curve&&(v=s.curve.toLowerCase()),v in f||(console.error('Unsupported curve function: "'+v+'". Supported curves: "bilinear", "rapid-acting" (Novolog, Novorapid, Humalog, Apidra) and "ultra-rapid" (Fiasp). Defaulting to "rapid-acting".'),v="rapid-acting");var b=f[v];return b.requireLongDia&&o<5&&(o=5),a=b.peak,n.forEach((function(e){if(e.date<=r){var n=r-60*o*60*1e3;if(e.date>n){var f=i(e,t,v,o,a,s);f&&f.iobContrib&&(u+=f.iobContrib),f&&f.activityContrib&&(c+=f.activityContrib),e.insulin&&f&&f.iobContrib&&(e.insulin<.1?(l+=f.iobContrib,m+=e.insulin):(d+=f.iobContrib,p+=e.insulin))}}})),{iob:Math.round(1e3*u)/1e3,activity:Math.round(1e4*c)/1e4,basaliob:Math.round(1e3*l)/1e3,bolusiob:Math.round(1e3*d)/1e3,netbasalinsulin:Math.round(1e3*m)/1e3,bolusinsulin:Math.round(1e3*p)/1e3,time:t}}},260:(e,t)=>{"use strict";function a(e,t,a){for(var r=0;r<e.length;r++){var i=e[r];if(i.timestamp===t&&void 0!==i[a])return!0;if(void 0!==i[a]){var n=new Date(i.timestamp),s=new Date(t),o=new Date(s.getTime()-2e3),u=new Date(s.getTime()+2e3);if(n>o&&n<u)return!0}}return!1}e.exports=function(e){for(var t=e.history,r=e.carbs,i=(e.profile,[]),n=[],s=0;s<r.length;s++){var o=r[s];if(o.carbs&&o.created_at){var u={};u.timestamp=o.created_at,u.carbs=o.carbs,u.nsCarbs=o.carbs,a(i,o.created_at,"carbs")?1:i.push(u)}}for(s=0;s<t.length;s++)"Bolus"===(o=t[s])._type&&o.timestamp?((u={}).timestamp=o.timestamp,u.bolus=o.amount,a(i,o.timestamp,"bolus")?1:i.push(u)):"BolusWizard"===o._type&&o.timestamp?n.push(o):"Meal Bolus"!==o._type&&"Correction Bolus"!==o._type&&"Snack Bolus"!==o._type&&"Bolus Wizard"!==o._type&&"Carb Correction"!==o._type||!o.created_at?"xdrip"===o.enteredBy?((u={}).timestamp=o.created_at,u.carbs=o.carbs,u.nsCarbs=o.carbs,u.bolus=o.insulin,a(i,o.timestamp,"carbs")?1:i.push(u)):o.carbs>0?((u={}).carbs=o.carbs,u.nsCarbs=o.carbs,u.timestamp=o.created_at,u.bolus=o.insulin,a(i,o.timestamp,"carbs")?1:i.push(u)):"JournalEntryMealMarker"===o._type&&o.carb_input>0&&o.timestamp&&((u={}).timestamp=o.timestamp,u.carbs=o.carb_input,u.journalCarbs=o.carb_input,a(i,o.timestamp,"carbs")?1:i.push(u)):((u={}).timestamp=o.created_at,u.carbs=o.carbs,u.nsCarbs=o.carbs,a(i,o.created_at,"carbs")?1:i.push(u));for(s=0;s<n.length;s++)o=n[s],(u={}).timestamp=o.timestamp,u.carbs=o.carb_input,u.bwCarbs=o.carb_input,a(i,o.timestamp,"carbs")?1:a(i,o.timestamp,"bolus")?i.push(u):(console.error("Skipping bolus wizard entry",s,"in the pump history with",o.carb_input,"g carbs and no insulin."),0===o.carb_input&&console.error("This is caused by a BolusWizard without carbs. If you specified insulin, it will be noted as a seperate Bolus"),o.timestamp&&console.error("Timestamp of bolus wizard:",o.timestamp));return i}},466:(e,t)=>{e.exports=function(e){if(void 0===e)return new Date;if(null===e)throw new TypeError("Null date input");if(e instanceof Date)return new Date(e.getTime());if("number"==typeof e){const t=new Date(e);if(!t)throw new TypeError(`Invalid date input: ${e}`);return t}if("string"==typeof e){const t=Date.parse(e);if(isNaN(t))throw new TypeError(`Invalid date input (string): ${e}`);return new Date(t)}throw new TypeError("Unsupported date input: "+typeof e)}},497:(e,t)=>{"use strict";function a(e,t,a){var r=t;void 0===t&&(r=new Date);var i=60*r.getHours()+r.getMinutes();if(a&&i>=a.offset&&i<a.endOffset)return[a.sensitivity,a];var n=(e=e.sensitivities.slice().sort(((e,t)=>e.offset-t.offset)))[e.length-1];if(0!==e[0].offset)return[-1,a];for(var s=1440,o=0;o<e.length-1;o++){var u=e[o],l=e[o+1];if(i>=u.offset&&i<l.offset){s=l.offset,n=e[o];break}}return(a=n).endOffset=s,[n.sensitivity,a]}a.isfLookup=a,e.exports=a},520:(e,t,a)=>{"use strict";var r=a(466),i=a(260),n=a(614);e.exports=function(e){var t={treatments:i(e),profile:e.profile,pumphistory:e.history,glucose:e.glucose,basalprofile:e.basalprofile},a=r(e.clock);return n(t,a)}},614:(e,t,a)=>{"use strict";var r=a(466),i=a(878);e.exports=function(e,t){var a=e.treatments,n=e.profile;if(void 0!==e.glucose)var s=e.glucose;var o=0,u=0,l=0,d=0,m=!1,p=t.getTime(),c=0;if(!a)return{};var f={glucose_data:s,iob_inputs:{profile:n,history:e.pumphistory,clock:t},basalprofile:e.basalprofile,mealTime:p},v=0;a.sort((function(e,t){var a=r(e.timestamp);return r(t.timestamp).getTime()-a.getTime()}));var b=0,g=0,h=0,_=0;a.forEach((function(e){var a=t.getTime(),n=a-216e5,s=r(e.timestamp).getTime();if(s>n&&s<=a&&e.carbs>=1){e.nsCarbs>=1?u+=parseFloat(e.nsCarbs):e.bwCarbs>=1?(l+=parseFloat(e.bwCarbs),m=!0):e.journalCarbs>=1?d+=parseFloat(e.journalCarbs):console.error("Treatment carbs unclassified:",e),o+=parseFloat(e.carbs),f.mealTime=s,c=Math.max(c,s);var p=i(f).carbsAbsorbed,T=Math.max(0,o-p);"number"!=typeof T||isNaN(T)?console.error("Bad myMealCOB:",T,"mealCOB:",v,"carbs:",o,"myCarbsAbsorbed:",p):v=Math.max(v,T),T<v?(b+=parseFloat(e.carbs),e.nsCarbs>=1?g+=parseFloat(e.nsCarbs):e.bwCarbs>=1?h+=parseFloat(e.bwCarbs):e.journalCarbs>=1&&(_+=parseFloat(e.journalCarbs))):(b=0,g=0,h=0)}})),o-=b,u-=g,l-=h,d-=_,f.ciTime=t.getTime(),f.mealTime=t.getTime()-216e5;var T=i(f);return"number"!=typeof n.maxCOB||isNaN(n.maxCOB)?console.error("Bad profile.maxCOB:",n.maxCOB):v=Math.min(n.maxCOB,v),void 0!==T.currentDeviation&&null!==T.currentDeviation||(console.error(""),console.error("Warning: setting mealCOB to 0 because currentDeviation is null/undefined"),v=0),void 0!==T.maxDeviation&&null!==T.maxDeviation||(console.error(""),console.error("Warning: setting mealCOB to 0 because maxDeviation is 0 or undefined"),v=0),{carbs:Math.round(1e3*o)/1e3,nsCarbs:Math.round(1e3*u)/1e3,bwCarbs:Math.round(1e3*l)/1e3,journalCarbs:Math.round(1e3*d)/1e3,mealCOB:Math.round(v),currentDeviation:Math.round(100*T.currentDeviation)/100,maxDeviation:Math.round(100*T.maxDeviation)/100,minDeviation:Math.round(100*T.minDeviation)/100,slopeFromMaxDeviation:Math.round(1e3*T.slopeFromMaxDeviation)/1e3,slopeFromMinDeviation:Math.round(1e3*T.slopeFromMinDeviation)/1e3,allDeviations:T.allDeviations,lastCarbTime:c,bwFound:m}}},635:(e,t,a)=>{"use strict";var r=a(83),i=a(466);function n(e,t){var a=[e];if("recurring"===t.type){var r=60*e.started_at.getHours()+e.started_at.getMinutes(),n=r+e.duration;if(e.duration>30||r<t.minutes&&n>t.minutes||n>1440&&t.minutes<n-1440){var s=structuredClone(e),o=structuredClone(e),u=0;if(e.duration>30)u=30;else{var l=t.minutes;n>1440&&(l=1440),u=l-r}var d=new Date(i(e.started_at).getTime()+60*u*1e3);s.duration=u,o.duration=e.duration-u,o.timestamp=d.toISOString(),o.started_at=new Date(o.timestamp),o.date=o.started_at.getTime(),a=[s,o]}}return a}function s(e,t){for(var a=[e],r=!0;r;){var i=[];for(const e of a){r=!1;for(const a of t){const t=n(e,a);if(t.length>1){i.push(...t),r=!0;break}}r||i.push(e)}a=i}return a}e.exports=function(e,t){var a,n,o=e.history,u=(e.history24,e.profile),l=e.autosens,d=[],m=[],p=[],c=[],f=!1,v=!1,b=i(e.clock);if(e.history24)o=[].concat(e.history).concat(e.history24);for(var g=b,h=0;h<o.length;h++){var _={};"PumpSuspend"===(y=o[h])._type?(_.timestamp=y.timestamp,_.started_at=i(y.timestamp),_.date=_.started_at.getTime(),p.push(_)):"PumpResume"===y._type&&(_.timestamp=y.timestamp,_.started_at=i(y.timestamp),_.date=_.started_at.getTime(),c.push(_))}p.sort(((e,t)=>e.date-t.date)),c.sort(((e,t)=>e.date-t.date)),c.length>0&&(a=c[0].timestamp,(0===p.length||c[0].date<p[0].date)&&(f=!0));var T=0;for(h=0;h<p.length;h++){for(;T<c.length&&!(c[T].date>p[h].date);T++);if(T>=c.length&&!v){v=1,n=p[h].timestamp;break}p[h].duration=(c[T].date-p[h].date)/60/1e3}for(f||v||c.length===p.length?f&&!v&&c.length-1!==p.length?console.error("Mismatched number of resumes("+c.length+") and suspends("+p.length+") assuming suspended prior to history block!"):!f&&v&&c.length!==p.length-1?console.error("Mismatched number of resumes("+c.length+") and suspends("+p.length+") assuming suspended past end of history block!"):f&&v&&c.length!==p.length&&console.error("Mismatched number of resumes("+c.length+") and suspends("+p.length+") assuming suspended prior to and past end of history block!"):console.error("Mismatched number of resumes("+c.length+") and suspends("+p.length+")!"),h<p.length-1&&p.splice(h+1,p.length-h-1),h=0;h<o.length;h++){var y;if((y=o[h]).bolus&&"Bolus"===y.bolus._type)y=(_=y).bolus;y.created_at&&(y.timestamp=y.created_at);var D=i(y.timestamp);if(!(D>g))if(g=D,"Bolus"===y._type)(_={}).timestamp=y.timestamp,_.started_at=i(y.timestamp),_.started_at>b?process.stderr.write(" "+y.amount+"U @ "+_.started_at):(_.date=_.started_at.getTime(),_.insulin=y.amount,m.push(_));else if("Meal Bolus"===y.eventType||"Correction Bolus"===y.eventType||"Snack Bolus"===y.eventType||"Bolus Wizard"===y.eventType){(_={}).timestamp=y.created_at,_.started_at=i(_.timestamp),_.date=_.started_at.getTime(),_.insulin=y.insulin,m.push(_)}else if("xdrip"===y.enteredBy){(_={}).timestamp=y.timestamp,_.started_at=i(_.timestamp),_.date=_.started_at.getTime(),_.insulin=y.insulin,m.push(_)}else if("HAPP_App"===y.enteredBy&&y.insulin){(_={}).timestamp=y.created_at,_.started_at=i(_.timestamp),_.date=_.started_at.getTime(),_.insulin=y.insulin,m.push(_)}else if("Temp Basal"!==y.eventType||"HAPP_App"!==y.enteredBy&&"openaps://AndroidAPS"!==y.enteredBy){if("Temp Basal"===y.eventType){(_={}).rate=y.rate,_.duration=y.duration,void 0!==y.amount&&(_.rate=y.amount/y.duration*60),_.timestamp=y.timestamp,_.started_at=i(_.timestamp),_.date=_.started_at.getTime(),d.push(_)}else if("TempBasal"===y._type){if("percent"===y.temp)continue;var M,w=y.rate,C=y.timestamp;if(h>0&&o[h-1].timestamp===C&&"TempBasalDuration"===o[h-1]._type)M=o[h-1]["duration (min)"];else{for(var x=0;x<o.length;x++)if(o[x].timestamp===C&&"TempBasalDuration"===o[x]._type){M=o[x]["duration (min)"];break}void 0===M&&console.error("No duration found for "+w+" U/hr basal "+C,o[h-1],y,o[h+1])}(_={}).rate=w,_.timestamp=y.timestamp,_.started_at=i(_.timestamp),_.date=_.started_at.getTime(),_.duration=M,d.push(_)}}else{(_={}).rate=y.absolute,_.duration=y.duration,_.timestamp=y.created_at,_.started_at=i(_.timestamp),_.date=_.started_at.getTime(),d.push(_)}}for((_={rate:0}).started_at=new Date(b.getTime()+6e4),_.date=_.started_at.getTime(),_.duration=t||0,d.push(_),d.sort(((e,t)=>e.date-t.date)),h=0;h+1<d.length;h++)d[h].date+60*d[h].duration*1e3>d[h+1].date&&(d[h].duration=(d[h+1].date-d[h].date)/60/1e3,null===d[h+1].duration&&d.splice(h+1,1));var k=[];u.basalprofile.forEach((e=>{const t={type:"recurring",minutes:e.minutes};k.push(t)}));var B=[];d.forEach((e=>{B=B.concat(s(e,k))})),d.sort(((e,t)=>e.date-t.date));var S,P=!1;if(void 0!==u.suspend_zeros_iob&&(P=u.suspend_zeros_iob),P){var F=[];B.forEach((e=>{var t=function(e,t,a,r,n,s){var o=[],u=new Date(a).getTime(),l=new Date(n).getTime();if(r&&e.date<u&&(e.date+60*e.duration*1e3<u?e.duration=0:(e.duration=(e.date+60*e.duration*1e3-u)/60/1e3,e.started_at=i(a),e.date=u)),s&&l&&e.date+60*e.duration*1e3>l&&(e.date>l?e.duration=0:e.duration=(l-e.date)/60/1e3),o.push(e),0===e.duration)return o;for(var d=0;d<t.length;d++)for(var m=t[d],p=0;p<o.length;p++)if(o[p].date<=m.date&&o[p].date+60*o[p].duration*1e3>m.date){if(o[p].date+60*o[p].duration*1e3>m.date+60*m.duration*1e3){var c=structuredClone(o[p]),f=new Date(i(m.started_at).getTime()+60*m.duration*1e3);c.timestamp=f.toISOString(),c.started_at=i(c.timestamp),c.date=m.date+60*m.duration*1e3,c.duration=(o[p].date+60*o[p].duration*1e3-(m.date+60*m.duration*1e3))/60/1e3,o.push(c)}o[p].duration=(m.date-o[p].date)/60/1e3}else if(m.date<=o[p].date&&m.date+60*m.duration*1e3>o[p].date){o[p].duration=(o[p].date+60*o[p].duration*1e3-(m.date+60*m.duration*1e3))/60/1e3;var v=new Date(i(m.started_at).getTime()+60*m.duration*1e3);o[p].timestamp=v.toISOString(),o[p].started_at=i(o[p].timestamp),o[p].date=m.date+60*m.duration*1e3}return o}(e,p,a,f,n,v);F.push(...t)}));var O=[];p.forEach((e=>{void 0!==e.duration&&O.push({_type:"SuspendBasal",rate:0,duration:e.duration,date:e.date,started_at:e.started_at})}));var E=b.getTime()-288e5,N=new Date(a).getTime();if(f&&E<N){var L=[{_type:"SuspendBasal",rate:0,duration:(N-E)/60/1e3,date:A=(z=new Date(E)).getTime(),started_at:I=i(z)}];O=O.concat(L)}if(v){var z,A=(z=new Date(n)).getTime(),I=i(z);L=[{_type:"SuspendBasal",rate:0,duration:(b-A)/60/1e3,date:A,timestamp:n,started_at:I}];O=O.concat(L)}O.forEach((e=>{F=F.concat(s(e,k))}))}else F=B;for(F.sort(((e,t)=>e.date-t.date)),h=0;h<F.length;h++){var W=F[h];if(W.duration>0){var j,H,q=u.current_basal;u.basalprofile&&u.basalprofile.length>0&&(q=r.basalLookup(u.basalprofile,new Date(W.timestamp))),void 0!==u.min_bg&&void 0!==u.max_bg&&(j=(u.min_bg+u.max_bg)/2);var R=u;if(R.half_basal_exercise_target)var U=R.half_basal_exercise_target;else U=160;if(R.exercise_mode&&R.temptargetSet&&j>=105){var G=U-100;H=G/(G+j-100)}else void 0!==l&&(H=l.ratio);H&&(q*=H);var Z=W.rate-q;S=Z<0?-.05:.05;var $=Math.round(Z*W.duration*10/6)/100,J=Math.round($/S),K=W.duration/J;for(T=0;T<J;T++){var Q={};Q.insulin=S,Q.date=W.date+T*K*60*1e3,Q.created_at=new Date(Q.date),m.push(Q)}}}var V=[].concat(m).concat(d);return V.sort(((e,t)=>e.date-t.date)),V}},663:(e,t)=>{"use strict";e.exports=function(e,t,a,r,i,n){if(e.insulin){void 0===t&&(t=new Date);var s=new Date(e.date),o=Math.round((t-s)/1e3/60);return"bilinear"===a?function(e,t,a){var r=75,i=180,n=3/a,s=n*t,o=0,u=0,l=2/(60*a),d=l/r,m=l/(i-r)*-1;if(s<r){o=e.insulin*(d*s);var p=s/5+1;u=e.insulin*(-.001852*p*p+.001852*p+1)}else if(s<i){var c=s-r;o=e.insulin*(l+m*c);var f=(s-r)/5;u=e.insulin*(.001323*f*f+-.054233*f+.55556)}return{activityContrib:o,iobContrib:u}}(e,o,r):function(e,t,a,r,i){"rapid-acting"===i.curve?!0===i.useCustomPeakTime&&void 0!==i.insulinPeakTime?i.insulinPeakTime>120?(console.error("Setting maximum Insulin Peak Time of 120m for",i.curve,"insulin"),r=120):i.insulinPeakTime<50?(console.error("Setting minimum Insulin Peak Time of 50m for",i.curve,"insulin"),r=50):r=i.insulinPeakTime:r=75:"ultra-rapid"===i.curve?!0===i.useCustomPeakTime&&void 0!==i.insulinPeakTime?i.insulinPeakTime>100?(console.error("Setting maximum Insulin Peak Time of 100m for",i.curve,"insulin"),r=100):i.insulinPeakTime<35?(console.error("Setting minimum Insulin Peak Time of 35m for",i.curve,"insulin"),r=35):r=i.insulinPeakTime:r=55:console.error("Curve of",i.curve,"is not supported.");var n=60*a,s=0,o=0;if(t<n){var u=r*(1-r/n)/(1-2*r/n),l=2*u/n,d=1/(1-l+(1+l)*Math.exp(-n/u));s=e.insulin*(d/Math.pow(u,2))*t*(1-t/n)*Math.exp(-t/u),o=e.insulin*(1-d*(1-l)*((Math.pow(t,2)/(u*n*(1-l))-t/u-1)*Math.exp(-t/u)+1))}return{activityContrib:s,iobContrib:o}}(e,o,r,i,n)}return{}}},878:(e,t,a)=>{"use strict";var r=a(83),i=a(191),n=a(635),s=a(497);e.exports=function(e){var t=e.glucose_data.map((function(e){return e.glucose=e.glucose||e.sgv,e})),a=e.iob_inputs,o=e.basalprofile,u=e.iob_inputs.profile,l=new Date(e.mealTime),d=new Date(e.ciTime),m=n(e.iob_inputs),p=0,c=[];c[0]=t[0];var f,v=0,b=!1,g=0;(!t[0].glucose||t[0].glucose<39)&&(g=-1);for(var h=1;h<t.length;++h){var _,T;if(t[h].display_time?_=new Date(t[h].display_time.replace("T"," ")):t[h].dateString?_=new Date(t[h].dateString):console.error("Could not determine BG time"),t[h].glucose&&!(t[h].glucose<39)){var y=(_-l)/36e5;if(!(y>6||b)){if(y<0&&(b=!0),void 0!==d){var D=(d-_)/27e5;if(D>1||D<0)continue}c[c.length-1].display_time?T=new Date(c[c.length-1].display_time.replace("T"," ")):g>=0&&t[g].display_time?T=new Date(t[g].display_time.replace("T"," ")):g>=0&&t[g].dateString?T=new Date(t[g].dateString):console.error("Could not determine last BG time");var M=(_-T)/6e4;if(Math.abs(M)>8){var w=t[g].glucose;for(M=Math.min(240,Math.abs(M));M>5;){var C=new Date(T.getTime()-3e5);c[++v]=[],c[v].date=C.getTime();var x=w+5/M*(t[h].glucose-w);c[v].glucose=Math.round(x),M-=5,w=x,T=new Date(C)}}else Math.abs(M)>2?(c[++v]=t[h],c[v].date=_.getTime()):c[v].glucose=(c[v].glucose+t[h].glucose)/2;g=h}}}var k=0,B=999,S=0,P=999,F=[],O=null;for(h=0;h<c.length-3;++h){var E,N,L,z;if(_=new Date(c[h].date),[E,O]=s.isfLookup(u.isfProfile,_,O),void 0!==c[h].glucose){if((N=c[h].glucose)<39||c[h+3].glucose<39){process.stderr.write("!");continue}L=(N-c[h+3].glucose)/3,z=N-c[h+1].glucose}else console.error("Could not find glucose data");L=L.toFixed(2),a.clock=_,a.profile.current_basal=r.basalLookup(o,_);var A=i(a,!0,m)[0],I=Math.round(-A.activity*E*5*100)/100,W=z-(I=I.toFixed(2));if(W=W.toFixed(2),0===h)f=Math.round(1e3*(L-I))/1e3,d>_&&F.push(Math.round(f)),u.min_5m_carbimpact;else if(d>_){var j=Math.round(1e3*(L-I))/1e3,H=(j-f)/(_-d)*1e3*60*5;j>S&&(k=Math.min(0,H),S=j),j<P&&(B=Math.max(0,H),P=j),F.push(Math.round(j))}if(_>l)p+=Math.max(W,f/2,u.min_5m_carbimpact)*u.carb_ratio/E}return{carbsAbsorbed:p,currentDeviation:f,maxDeviation:S,minDeviation:P,slopeFromMaxDeviation:k,slopeFromMinDeviation:B,allDeviations:F}}}},t={};var a=function a(r){var i=t[r];if(void 0!==i)return i.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,a),n.exports}(520);freeaps_meal=a})();